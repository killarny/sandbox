<!DOCTYPE html>
<html ng-app="chat">
    <head>
        <!-- <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}client/css/base.css"> -->
        <!-- <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}client/css/chat.css"> -->
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}client/css/bootstrap.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome-ie7.min.css" rel="stylesheet">
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
        <script src="{{ STATIC_URL }}client/js/ui-bootstrap-tpls-0.4.0.min.js"></script>
        <script>
            var session_id = "{{ session_id }}";
        </script>
        <script src="{{ STATIC_URL }}client/js/chat-angular.js"></script>
        <title>sandbox</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

    <body ng-controller="client">
        <div class="navbar navbar-inverse">
            <div class="navbar-inner">
                <span class="brand">sandbox</span>
                <ul class="nav">
                    <li class="divider-vertical"></li>
                    <li class="active"><a href="{% url "chat" %}">Chat</a></li>
                    <li><a href="{% url "demo" %}">Demo</a></li>
                    <li><a href="{% url "physics" %}">Physics</a></li>
                    <li class="divider-vertical"></li>
                </ul>
            </div>
        </div>
        <div class="chat container">
            <div ng-switch on="connection.status" class="span12">
                <span ng-switch-when="disconnected" class="label label-important"><% connection.status %></span>
                <span ng-switch-when="connected" class="label label-success"><% connection.status %></span>
                <span ng-switch-default class="label label-inverse"><% connection.status %></span>
            </div>
            <div class="row">
                <div class="span9 well well-small">
                    <ul>
                        <li class="history-entry" ng-repeat="entry in log">
                            <div ng-switch on="entry.type">
                                <div class="<% entry.type %>" ng-switch-when="status">
                                    <span class="muted"><% entry.message %></span>
                                </div>
                                <div class="<% entry.type %>" ng-switch-when="joined">
                                    <span class="text-success"><% entry.user.fullname %> joined.</span>
                                </div>
                                <div class="<% entry.type %>" ng-switch-when="left">
                                    <span class="text-error"><% entry.user.fullname %> left.</span>
                                </div>
                                <div class="<% entry.type %>" ng-switch-when="say">
                                    <span class="badge badge-inverse"><% entry.author.fullname %></span>
                                    <span class="message"><% entry.message %></span>
                                </div>
                                <div class="default" ng-switch-default>
                                    <span class="muted"><% entry %></span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="span2 well well-small">
                    <ul>
                        <li class="text-right" ng-repeat="user in users">
                            <i class="icon-user"></i>
                            <abbr title="<% user.username %>"><% user.fullname || user.username %></abbr>
                        </li>
                    </ul>
                </div>
            </div>
            <form ng-submit="input_send()" class="input-prepend">
                <span class="add-on">Say</span>
                <input ng-model="input" class="span12" type="text" placeholder="Enter chat message"/>
            </form>
        </div>
    </body>
    <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
</html>
